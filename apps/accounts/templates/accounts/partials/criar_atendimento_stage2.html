{# accounts/partials/criar_atendimento_stage2.html #}
<div id="stage2-modal">
  <div class="mb-3">
    <label for="funcionario" class="form-label">Funcionário</label>
    <select class="form-select" id="funcionario" name="funcionario"
            hx-get="{% url 'accounts:owner_slots_disponiveis' %}"
            hx-trigger="change"
            hx-target="#slot-modal"
            hx-include="#data"
            hx-swap="innerHTML"
            hx-select="option">
      {% for f in funcionarios %}
        <option value="{{ f.id }}">{{ f.nome }}</option>
      {% empty %}
        <option value="">Nenhum funcionário nesta loja</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label for="servicos" class="form-label">Serviços</label>
    <select class="form-select" id="servicos" name="servicos" multiple>
      {% for s in servicos %}
        <option value="{{ s.id }}">{{ s.nome }}</option>
      {% empty %}
        <option value="">Nenhum serviço nesta loja</option>
      {% endfor %}
    </select>
  </div>

  <div class="mb-3">
    <label for="data" class="form-label">Data</label>
    <input type="date" class="form-control" id="data" name="data"
           value="{{ dia|date:'Y-m-d' }}"
           hx-get="{% url 'accounts:owner_slots_disponiveis' %}"
           hx-trigger="change"
           hx-target="#slot-modal"
           hx-include="#funcionario"
           hx-swap="innerHTML"
           hx-select="option">
  </div>

  <div class="mb-3">
    <label for="slot-modal" class="form-label">Horário</label>
    <select class="form-select" id="slot-modal" name="slot">
      <option value="">Selecione funcionário e data</option>
    </select>
  </div>
</div>

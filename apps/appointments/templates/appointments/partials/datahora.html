<h3>Data e horário</h3>
<p>{{ funcionario.nome }} –
{% for s in servicos %}{{ s.nome }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>

<form method="get" hx-get="{% url 'appointments:agendamento_datahora' %}" hx-target="#step-container" class="mb-3">
  <div class="mb-3">
    {{ form.data.label_tag }} {{ form.data }}
  </div>
  <button type="submit" class="btn btn-secondary">Ver horários</button>
</form>

{% if form.hora.field.choices %}
<form method="post" hx-post="{% url 'appointments:agendamento_datahora' %}" hx-target="#step-container">
  {% csrf_token %}
  <input type="hidden" name="data" value="{{ dia|date:'Y-m-d' }}">
  <div class="mb-3">
    {{ form.hora.label_tag }} {{ form.hora }}
  </div>
  <div class="d-flex justify-content-between">
    <button type="button" class="btn btn-secondary"
            hx-get="{% url 'appointments:agendamento_servicos' funcionario.id %}"
            hx-target="#step-container" hx-push-url="true">Voltar</button>
    <button type="submit" class="btn btn-primary">Confirmar</button>
  </div>
</form>
{% else %}
<p>Nenhum horário disponível para esta data.</p>
<div class="d-flex justify-content-start">
  <button type="button" class="btn btn-secondary"
          hx-get="{% url 'appointments:agendamento_servicos' funcionario.id %}"
          hx-target="#step-container" hx-push-url="true">Voltar</button>
</div>
{% endif %}

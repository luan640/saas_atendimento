{% extends 'accounts/base.html' %}
{% block title %}Funcionários{% endblock %}
{% block content %}
<h4 class="mb-3">Funcionários de {{ loja.nome }}</h4>
<div class="row">
  <div class="col-md-5">
    <h5>Novo funcionário</h5>
    <form method="post">{% csrf_token %}
      {{ form.as_p }}
      <button class="btn btn-primary w-100" type="submit">Salvar</button>
    </form>
  </div>
  <div class="col-md-7">
    <h5>Lista</h5>
    <table class="table table-striped">
      <thead><tr><th>Nome</th><th>Cargo</th><th>Ações</th></tr></thead>
      <tbody>
        {% for func in funcionarios %}
        <tr>
          <td>{{ func.nome }}</td>
          <td>{{ func.get_cargo_display }}</td>
          <td>
            <a class="btn btn-sm btn-secondary" hx-get="{% url 'cadastro:owner_staff_edit' loja.id func.id %}" hx-target="#content" hx-push-url="true">Editar</a>
            <a class="btn btn-sm btn-danger" hx-get="{% url 'cadastro:owner_staff_delete' loja.id func.id %}" hx-target="#content" hx-push-url="true">Excluir</a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="3" class="text-muted">Nenhum funcionário.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<a class="btn btn-secondary mt-3" hx-get="{% url 'cadastro:owner_shops' %}" hx-target="#content" hx-push-url="true">Voltar</a>
{% endblock %}

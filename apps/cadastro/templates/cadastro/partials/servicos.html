<tbody id="servicos-tbody">
  {% for s in servicos %}
  <tr>
    <td>{{ s.nome }}</td>
    <td>R$ {{ s.preco }}</td>
    <td>{{ s.duracao_minutos }} min</td>
    <td>{{ s.loja.nome }}</td>
    <td>
      {% if s.ativo %}
        <span class="badge bg-success">Ativo</span>
      {% else %}
        <span class="badge bg-secondary">Inativo</span>
      {% endif %}
    </td>
    <td>
      {% with profs=s.profissionais.all %}
        {% if profs %}
          {% for p in profs %}
            <span class="badge text-bg-light">{{ p.nome }}</span>
          {% endfor %}
        {% else %}
          <span class="text-muted">—</span>
        {% endif %}
      {% endwith %}
    </td>
    <td class="text-end">
      <button
        class="btn btn-sm btn-outline-primary"
        hx-get="{% url 'cadastro:servico_edit' s.pk %}"
        hx-target="#modalServicoOps .modal-content"
        hx-swap="innerHTML"
        hx-on="htmx:afterOnLoad: (function(){ const m=document.getElementById('modalServicoOps'); if(m){ bootstrap.Modal.getOrCreateInstance(m).show(); } })()"
      >
        Editar
      </button>

      <button
        class="btn btn-sm btn-outline-danger"
        hx-get="{% url 'cadastro:servico_delete' s.pk %}"
        hx-target="#modalServicoOps .modal-content"
        hx-swap="innerHTML"
        hx-on="htmx:afterOnLoad: (function(){ const m=document.getElementById('modalServicoOps'); if(m){ bootstrap.Modal.getOrCreateInstance(m).show(); } })()"
      >
        Excluir
      </button>
    </td>
  </tr>
  {% empty %}
  <tr><td colspan="7" class="text-muted">Nenhum serviço encontrado.</td></tr>
  {% endfor %}
</tbody>
